var hnMd=(()=>{var l=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var b=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},T=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of w(t))!y.call(e,r)&&r!==n&&l(e,r,{get:()=>t[r],enumerable:!(o=x(t,r))||o.enumerable});return e};var C=e=>T(l({},"__esModule",{value:!0}),e);var S={};b(S,{copyThread:()=>f,extractThread:()=>d});var i=(e,t)=>(t||document).querySelector(e),u=(e="")=>e.replace(/\s+/g," ").trim(),c=e=>String(e).padStart(2,"0"),m=e=>{if(!e)return"";let t=e.cloneNode(!0);return t.querySelectorAll("a[href]").forEach(n=>n.textContent=n.href),t.querySelectorAll("p, br, div").forEach(n=>n.insertAdjacentText("beforebegin"," ")),u(t.textContent??"")},p=e=>{let t=i(".age",e)?.getAttribute("title")?.trim();if(!t)return"unknown";let n=t.split(/\s+/)[0],o=new Date(n.endsWith("Z")?n:`${n}Z`);return Number.isNaN(o.getTime())?"unknown":`${o.getUTCFullYear()}-${c(o.getUTCMonth()+1)}-${c(o.getUTCDate())}T${c(o.getUTCHours())}:${c(o.getUTCMinutes())}Z`},$=e=>{let t=i(".fatitem",e);if(!t)return null;let n=u(i(".titleline a",t)?.textContent??""),o=m(i(".commtext",t)),r=i(".titleline a",t)?.href??"",a=i(".hnuser",t)?.textContent?.trim()??"unknown",s=u([n,o,r&&!r.includes("item?id=")?r:""].filter(Boolean).join(" \u2014 "));return s?{user:a,message:s,timestamp:p(t),indent:0}:null},N=e=>[...e.querySelectorAll("tr.athing.comtr")].map(t=>{let n=parseInt(i("td.ind img",t)?.getAttribute("width")??"0",10),o=Number.isNaN(n)?0:Math.max(Math.round(n/40),0),r=i(".hnuser",t)?.textContent?.trim()??"unknown",a=m(i(".commtext",t))||"[no text]";return{user:r,message:a,timestamp:p(t),indent:o}}),d=(e=document)=>{let t=$(e),n=t?1:0,o=N(e).map(a=>({...a,indent:a.indent+n}));return[t,...o].filter(Boolean).map(({indent:a,user:s,message:g,timestamp:h})=>`${"  ".repeat(a)}- ${s}: ${g} [${s} @ ${h}]`).join(`
`)},k=async(e,t=document,n=window)=>{if(n?.navigator?.clipboard?.writeText)return await n.navigator.clipboard.writeText(e),!0;let o=t.createElement("textarea");o.value=e,t.body.append(o),o.select();let r=t.execCommand?.("copy");return o.remove(),!!r},f=async(e=document,t=window)=>{let n=d(e),o=await k(n,e,t);return(t?.alert??console.warn)(o?"Hacker News thread copied to clipboard":"Failed to copy Hacker News thread"),n};typeof window<"u"&&(window.hnMd={extractThread:d,copyThread:f});return C(S);})();
